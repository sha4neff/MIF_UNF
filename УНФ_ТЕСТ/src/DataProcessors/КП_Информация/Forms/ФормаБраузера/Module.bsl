#Область ОбработчикиСобытий

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	ЗагрузитьСтраницу();

КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Параметры.Свойство("АдресСтраницы", АдресСтраницы);

КонецПроцедуры

&НаКлиенте
Процедура ПриПовторномОткрытии()
	
	//При повторном открытии создание объекта не происходит и 
	//обычный параметр не передается, поэтому получим адрес страницы
	//через вспомогательный параметр
	ЗначениеПараметра=КП_ОбщееСервер.ПрочитатьВспомогательныйПараметр();
	Если ЗначениеПараметра<>Неопределено И ТипЗнч(ЗначениеПараметра)=Тип("Структура") И ЗначениеПараметра.Свойство("АдресСтраницы") Тогда
		АдресСтраницы=ЗначениеПараметра.АдресСтраницы;
	КонецЕсли;
	ЗагрузитьСтраницу();

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗагрузитьСтраницу()
	Если НЕ ЗначениеЗаполнено(АдресСтраницы) Тогда
		Возврат;
	КонецЕсли;
	
	HTMLPlayer=АдресСтраницы;
	
КонецПроцедуры

#КонецОбласти
