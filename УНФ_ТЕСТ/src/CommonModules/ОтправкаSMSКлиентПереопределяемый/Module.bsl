///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2020, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Открывает форму для отправки нового SMS.
//
// Параметры:
//   НомераПолучателей - Массив - номера получателей в формате +<КодСтраны><КодDEF><номер>(строкой);
//   Текст             - Строка - текст сообщения, длиной не более 1000 символов;
//   ДополнительныеПараметры - Структура - дополнительные параметры отправки SMS:
//          * ИмяОтправителя     - Строка - имя отправителя, которое будет отображаться вместо номера у получателей.
//          * ПеревестиВТранслит - Булево - Истина, если требуется переводить текст сообщения в транслит перед отправкой.
//   СтандартнаяОбработка - Булево -  флаг необходимости выполнения стандартной обработки отправки SMS.
//
Процедура ПриОтправкеSMS(НомераПолучателей, Текст, ДополнительныеПараметры, СтандартнаяОбработка) Экспорт
	
	СтандартнаяОбработка = Ложь;
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("Текст", Текст);
	ПараметрыФормы.Вставить("Получатели", Новый Массив);
	
	Для Каждого НомерПолучателя Из НомераПолучателей Цикл
		ЗначениеПолучателя = Новый Структура;
		ЗначениеПолучателя.Вставить("Телефон", НомерПолучателя);
		Если ДополнительныеПараметры.Свойство("ИсточникКонтактнойИнформации")
			И ЗначениеЗаполнено(ДополнительныеПараметры.ИсточникКонтактнойИнформации) Тогда
			
			ЗначениеПолучателя.Вставить("ИсточникКонтактнойИнформации", ДополнительныеПараметры.ИсточникКонтактнойИнформации);
		КонецЕсли;
		
		ПараметрыФормы.Получатели.Добавить(ЗначениеПолучателя);
		
	КонецЦикла;
		
	ОткрытьФорму("Документ.Событие.Форма.ФормаСообщенияSMS", ПараметрыФормы);
	
КонецПроцедуры

// Определяет адрес страницы провайдера в сети Интернет.
//
// Параметры:
//  Провайдер - ПеречислениеСсылка.ПровайдерыSMS - поставщик услуги по отправке SMS.
//  АдресВИнтернете - Строка - адрес страницы провайдера в Интернете.
//
Процедура ПриПолученииАдресаПровайдераВИнтернете(Провайдер, АдресВИнтернете) Экспорт
	
	
	
КонецПроцедуры

#КонецОбласти
